
database: adventure_works_dw
description: 'AdventureWorks es una base de datos de ejemplo facilitada por Microsoft. Esta base de datos admite escenarios estándar de procesamiento de transacciones en línea para un fabricante de bicicletas ficticio: Adventure Works Cycles.'
schemas:
- name: sales
  description: 'Se trata de un esquema de ventas con espíritu de simplificar la información del módulo de ventas de la BBDD original. Contamos con información de ventas (tanto por internet como de retail), y las dimensiones asociadas (promociones, clientes, distribuidores, vendedores, porductos, etc.).'
  tables:
  - name: dim_customer
    description: 'Tabla de dimensión que almacena la información detallada de cada cliente que haya comprado online (por internet). Relevante cuando se hacen consultas relativas a clientes, como su nombre, análisis por género y estado civil o ingresos de los mismos.'
    columns:
    - name: customer_key
      description: 'Clave primaria para identificar de forma única a cada cliente.'
      data_type: INT4
      is_primary_key: true

    - name: geography_key
      description: 'Clave foránea que apunta a los datos geográficos del cliente en la tabla `dim_geography`.'
      data_type: INT4
      is_foreign_key: true
      reference: sales.dim_geography.geography_key

    - name: customer_full_name
      description: 'Nombre/s y apellido/s del cliente.'
      data_type: TEXT

    - name: birth_date
      description: 'Fecha de nacimiento del cliente.'
      data_type: DATE

    - name: marital_status
      description: 'Estado civil del cliente. M=Married(Casada/o), S=Single(Soltera/o)'
      data_type: BPCHAR(1)

    - name: gender
      description: 'Género del cliente. F=Female(Mujer), M=Male(Hombre)'
      data_type: VARCHAR(1)

    - name: yearly_income
      description: 'Ingreso anual del cliente en USD.'
      data_type: NUMERIC

    - name: total_children
      description: 'Cantidad total de hijos del cliente.'
      data_type: INT2

    - name: number_children_at_home
      description: 'Cantidad total de hijos convivientes del cliente.'
      data_type: INT2

    - name: english_education
      description: 'Nivel de educación del cliente (INGLÉS).'
      data_type: VARCHAR(40)

    - name: spanish_education
      description: 'Nivel de educación del cliente (ESPAÑOL).'
      data_type: VARCHAR(40)

    - name: english_occupation
      description: 'Ocupación del cliente (INGLÉS).'
      data_type: VARCHAR(100)

    - name: spanish_occupation
      description: 'Ocupación del cliente (ESPAÑOL).'
      data_type: VARCHAR(100)

    - name: house_owner
      description: 'Indicador de si el cliente es propietario. True=Propietario, False=No Propietario'
      data_type: BOOL

    - name: number_cars_owned
      description: 'Cantidad de tarjetas de crédito que posee el cliente.'
      data_type: INT2

    - name: commute_distance
      description: 'Distancia entre la casa del cliente y su lugar habitual de trabajo. Segmentado en 5 categorías: ["0-1 Miles", "1-2 Miles", "2-5 Miles", "5-10 Miles", "10+ Miles"]'
      data_type: VARCHAR(15)

  - name: dim_geography
    description: 'Tabla de dimensión que almacena información detallada sobre datos geográficos. Relevante cuando se desea analizar información desglosada a nivel ciudades, códigos postales, estados, países, etc.'
    columns:
    - name: geography_key
      description: 'Clave primaria para identificar de forma única a la menor granularidad disponible (códigos postales).'
      data_type: INT4
      is_primary_key: true

    - name: city
      description: 'Nombre de la ciudad.'
      data_type: VARCHAR(30)

    - name: state_province_code
      description: 'Código del estado/provincia.'
      data_type: VARCHAR(3)

    - name: state_province_name
      description: 'Nombre del estado/provincia.'
      data_type: VARCHAR(50)

    - name: country_region_code
      description: 'Código del país.'
      data_type: VARCHAR(3)

    - name: english_country_region_name
      description: 'Nombre del país (INGLÉS).'
      data_type: VARCHAR(50)

    - name: spanish_country_region_name
      description: 'Nombre del país (ESPAÑOL).'
      data_type: VARCHAR(50)

    - name: postal_code
      description: 'Código postal'
      data_type: VARCHAR(15)

    - name: sales_territory_key
      description: 'Clave foránea que apunta a la división territorial de ventas, a la que pertenecen los datos geográficos en cuestión, en la tabla `dim_sales_territory`.'
      data_type: INT4
      is_foreign_key: true
      reference: sales.dim_sales_territory.sales_territory_key

  - name: dim_product
    description: 'Tabla de dimensión que almacena la información detallada de cada producto que alguna vez haya sido vendido. Relevante para cualquier consulta en la que se nos pida listar productos por su nombre.'
    columns:
    - name: product_key
      description: 'Clave primaria para identificar de forma única a cada producto.'
      data_type: INT4
      is_primary_key: true

    - name: weight_unit_measure_code
      description: 'Unidad de medida de peso. Algunos artículos no lo tienen configurado y viene a NULL.'
      data_type: BPCHAR(3)

    - name: size_unit_measure_code
      description: 'Unidad de medida de tamaño. Algunos artículos no lo tienen configurado y viene a NULL.'
      data_type: BPCHAR(3)

    - name: english_product_name
      description: 'Nombre del producto (INGLÉS). NUNCA viene a NULL.'
      data_type: VARCHAR(50)

    - name: spanish_product_name
      description: 'Nombre del producto (ESPAÑOL). Puede venir a NULL.'
      data_type: VARCHAR(50)

    - name: standard_cost
      description: 'Coste estándar del producto en USD.'
      data_type: NUMERIC

    - name: finished_goods_flag
      description: 'Indicador de si se trata de un producto final vendible. 0 = El producto no es un artículo vendible, 1 = El producto es vendible.'
      data_type: BOOL

    - name: color
      description: 'Color del producto. Para los casos donde no corresponda, se identifica con un "NA".'
      data_type: VARCHAR(15)

    - name: safety_stock_level
      description: 'Nivel de stock mínimo del producto.'
      data_type: INT2

    - name: reorder_point
      description: 'Nivel de stock que dispara una orden de compra o una orden de trabajo.'
      data_type: INT2

    - name: list_price
      description: 'Precio de venta del producto en USD.'
      data_type: NUMERIC

    - name: size
      description: 'Talla del producto. Ej. 48, L. Puede venir a NULL.'
      data_type: VARCHAR(50)

    - name: size_range
      description: 'Rango dentro del que entra la talla del producto. Ej.: 48-52 CM, L. En caso de no aplique, se indica un "NA". Puede venir a NULL.'
      data_type: VARCHAR(50)

    - name: weight
      description: 'Peso del producto. Puede venir a NULL.'
      data_type: FLOAT8

    - name: days_to_manufacture
      description: 'Número de días necesarios para fabricar el producto.'
      data_type: INT4

    - name: product_line
      description: 'Línea a la que pertence el producto. R=Road(Carretera), M=Mountain(Montaña), T=Touring(Turismo), S=Standard(Estándar). Puede venir a NULL.'
      data_type: BPCHAR(2)

    - name: dealer_price
      description: 'Precio de distribuidor en USD.'
      data_type: NUMERIC

    - name: class
      description: 'Gama a la que pertenece el producto. H=High(Alta), M=Medium(Media), L=Low(Baja). Puede venir a NULL.'
      data_type: BPCHAR(2)

    - name: style
      description: 'Público para el que está pensado el producto. W=Womens(Mujeres), M=Mens(Hombres), U=Universal.  Puede venir a NULL.'
      data_type: BPCHAR(2)

    - name: model_name
      description: 'Modelo al que pertenece el producto. NUNCA será NULL.'
      data_type: VARCHAR(50)

    - name: english_description
      description: 'Descripción detallada del producto (INGLÉS). NUNCA viene a NULL.'
      data_type: VARCHAR(400)

    - name: start_date
      description: 'Fecha en la que el producto estuvo disponible para la venta.'
      data_type: DATE

    - name: end_date
      description: 'Fecha en la que el producto dejó de estar disponible para la venta. En caso de que siga disponible, vendrá a NULL.'
      data_type: DATE

    - name: active
      description: 'Indicador de si el producto sigue disponible para la venta.'
      data_type: BOOL

    - name: english_product_subcategory_name
      description: 'Sub-categoría a la que pertenece el producto (INGLÉS). NUNCA viene a NULL.'
      data_type: VARCHAR(50)

    - name: spanish_product_subcategory_name
      description: 'Sub-categoría a la que pertenece el producto (ESPAÑOL). NUNCA viene a NULL.'
      data_type: VARCHAR(50)

    - name: english_product_category_name
      description: 'Categoría principal a la que pertenece el producto (INGLÉS). NUNCA viene a NULL.'
      data_type: VARCHAR(50)

    - name: spanish_product_category_name
      description: 'Categoría principal a la que pertenece el producto (ESPAÑOL). NUNCA viene a NULL.'
      data_type: VARCHAR(50)

  - name: dim_promotion
    description: 'Tabla de dimensión que almacena la información detallada de las diferentes promociones / descuentos que pueden aplicarse a las ventas. Relevante cuando se quiere segmentar las promociones que han sido aplicadas en las ventas.'
    columns:
    - name: promotion_key
      description: 'Clave primaria para identificar de forma única a cada promoción / descuento.'
      data_type: INT4
      is_primary_key: true

    - name: english_promotion_name
      description: 'Nombre de la promoción (INGLÉS). NUNCA será NULL.'
      data_type: VARCHAR(255)

    - name: spanish_promotion_name
      description: 'Nombre de la promoción (ESPAÑOL). NUNCA será NULL.'
      data_type: VARCHAR(255)

    - name: discount_pct
      description: 'Porcentaje de descuento aplicable a la promoción, en decimal. Comprendido entre 0 y 1. NUNCA será NULL. Ej. 0, 0.02, 0.05.'
      data_type: FLOAT8

    - name: english_promotion_type
      description: 'Tipo de promoción (INGLÉS). NUNCA será NULL. Ej. No Discount, Volume Discount, Seasonal Discount.'
      data_type: VARCHAR(50)

    - name: spanish_promotion_type
      description: 'Tipo de promoción (ESPAÑOL). NUNCA será NULL. Ej. Sin descuento, Descuento por volumen, Descuento de temporada.'
      data_type: VARCHAR(50)

    - name: english_promotion_category
      description: 'Categoría de la promoción (INGLÉS). NUNCA será NULL. Indica si es aplicable a un distribuidor (Reseller) o a un cliente final (Customer).'
      data_type: VARCHAR(50)

    - name: spanish_promotion_category
      description: 'Categoría de la promoción (ESPAÑOL). NUNCA será NULL. Indica si es aplicable a un distribuidor (Distribuidor) o a un cliente final (Cliente).'
      data_type: VARCHAR(50)

    - name: start_date
      description: 'Fecha en la que comienza a ser válida la promoción. En caso de venir a NULL, su vigencia es ilimitada.'
      data_type: DATE

    - name: end_date
      description: 'Fecha en la que deja de ser válida la promoción. En caso de venir a NULL, su vigencia es ilimitada.'
      data_type: DATE

    - name: min_qty
      description: 'Cantidad mínima necesaria para aplicar la promoción. NUNCA será NULL.'
      data_type: INT4

    - name: max_qty
      description: 'Cantidad máxima a la que será aplicable la promoción. En caso de venir a NULL, significa que no hay límite.'
      data_type: INT4

  - name: dim_reseller
    description: 'Tabla de dimensión que almacena la información detallada de cada tienda/distribuidor. Relevante siempre que se pida obtener listado con datos de tiendas/distribuidores porque en esta tabla se almacenan sus nombres.'
    columns:
    - name: reseller_key
      description: 'Clave primaria para identificar de forma única a cada distribuidor.'
      data_type: INT4
      is_primary_key: true

    - name: geography_key
      description: 'Clave foránea que apunta a los datos geográficos de la tienda/distribuidor en la tabla `dim_geography`.'
      data_type: INT4
      is_foreign_key: true
      reference: sales.dim_geography.geography_key

    - name: business_type
      description: 'Tipo de negocio / tienda del que se trata. Ej. Value Added Reseller, Specialty Bike Shop, Warehouse'
      data_type: VARCHAR(20)

    - name: reseller_name
      description: 'Nombre de la tienda / distribuidor.'
      data_type: VARCHAR(50)

    - name: number_employees
      description: 'Cantidad de empleados de la tienda / distribuidor.'
      data_type: INT4

    - name: order_frequency
      description: 'Frecuencia con la que se espera que compre un distribuidor. A=Anually(Anual), S=Semestrally(Semestral), Q=Quaterlly(Trimestral).'
      data_type: BPCHAR(1)

    - name: first_order_year
      description: 'Año de primera compra del distribuidor. Si viene a NULL es que nunca ha comprado.'
      data_type: INT4

    - name: last_order_year
      description: 'Año de última compra del distribuidor. Si viene a NULL es que nunca ha comprado.'
      data_type: INT4

    - name: product_line
      description: 'Línea de productos en la que se especializa el distribuidor. Ej. Road, Mountain, Touring.'
      data_type: VARCHAR(50)

    - name: year_opened
      description: 'Año de apertura de la tienda / distribuidor.'
      data_type: NUMERIC

  - name: dim_sales_person
    description: 'Tabla de dimensión que almacena la información detallada de cada vendedor. Relevante cuando se nos pide sacar información relativa a las ventas que ha hecho cada vendedor, ya que en esta tabla se tiene el nombre de cada uno.'
    columns:
    - name: employee_key
      description: 'Clave primaria para identificar de forma única a cada vendedor.'
      data_type: INT4
      is_primary_key: true

    - name: employee_full_name
      description: 'Nombre/s y apellido/s del vendedor.'
      data_type: TEXT

    - name: title
      description: 'Título que ese vendedor tiene dentro de la compañía como empleado.'
      data_type: VARCHAR(50)

    - name: gender
      description: 'Género del vendedor. F=Female(Mujer), M=Male(Hombre)'
      data_type: BPCHAR(1)

    - name: sales_person_flag
      description: 'Indicador que se trata de un empleado vendedor. SIEMPRE vendrá a true.'
      data_type: BOOL

  - name: dim_sales_reason
    description: 'Tabla de dimensión que almacena la información detallada de cada motivo de venta. Relevante cuando se busca comprender los principales motivos por los que se han logrado las ventas.'
    columns:
    - name: sales_reason_key
      description: 'Clave primaria para identificar de forma única a cada motivo de venta.'
      data_type: INT4
      is_primary_key: true

    - name: sales_reason_name
      description: 'Nombre del motivo de venta. NUNCA viene a NULL.Ej. Price, On Promotion, Magazine Advertisement.'
      data_type: VARCHAR(50)

    - name: sales_reason_reason_type
      description: 'Tipo del motivo de venta. NUNCA viene a NULL. Ej. Other, Promotion, Marketing.'
      data_type: VARCHAR(50)

  - name: dim_sales_territory
    description: 'Tabla de dimensión que almacena la información detallada de cada cada división territorial de ventas. Relevante cuando se quieren hacer análisis de venta a nivel territorial.'
    columns:
    - name: sales_territory_key
      description: 'Clave primaria para identificar de forma única a cada división territorial de ventas.'
      data_type: INT4
      is_primary_key: true

    - name: sales_territory_region
      description: 'Región a la que corresponde cada territorio de ventas, contextualizado dentro de cada country. En caso de que no haya región, será el propio country. Ej. Southeast, France.'
      data_type: VARCHAR(50)

    - name: sales_territory_country
      description: 'País al que corresponde cada territorio de ventas. Ej. United States, France.'
      data_type: VARCHAR(50)

    - name: sales_territory_group
      description: 'Agrupación territorial a la que pertenece cada territorio de ventas. Ej. North America, Europe.'
      data_type: VARCHAR(50)

  - name: fact_internet_sales_reason
    description: 'Tabla de referencias cruzadas que asigna líneas de ordenes de ventas a códigos de motivo de venta. La relación es de 1 línea de ordenes de ventas a N motivos de venta. La clave primaria de esta tabla se conforma por los tres campos que la componen en conjunto. Necesaria cuando se quieran analizar los motivos de ventas, ya que es la tabla que conecta las ventas con los motivos.'
    columns:
    - name: sales_order_number
      description: 'Número de orden de venta. Clave foránea que apunta a la orden de venta en cuestión en la tabla `fact_sales`. Ej. SO43697.'
      data_type: VARCHAR(20)
      is_primary_key: true
      is_foreign_key: true
      reference: sales.fact_sales.sales_order_number

    - name: sales_order_line_number
      description: 'Número de línea de la orden de venta. Clave foránea que apunta al número de línea de la orden de venta en cuestión en la tabla `fact_sales`. Ej. 1, 2.'
      data_type: INT2
      is_primary_key: true
      is_foreign_key: true
      reference: sales.fact_sales.sales_order_line_number

    - name: sales_reason_key
      description: 'Clave foránea que apunta al motivo de la venta aplicable en la tabla `dim_sales_reason`.'
      data_type: INT4
      is_primary_key: true
      is_foreign_key: true
      reference: sales.dim_sales_reason.sales_reason_key

  - name: fact_sales
    description: 'Tabla de hechos que contiene el detalle de las ordenes de ventas que ya han sido entregadas, con una granularidad a nivel de línea, mostrando siempre la última versión de cada pedido. SIEMPRE que se soliciten datos de ventas, como cantidades vendidas, importe de ventas, costes de ventas, impuestos, costes de envío, deberán ser obtenidos de esta tabla. Permite hacer desgloses a nivel de productos, clientes, tiendas/distribuidores, división territorial, promociones aplicadas y vendedores involucrados.'
    columns:
    - name: product_key
      description: 'Clave foránea que apunta al producto que ha sido vendido en la tabla `dim_product`.'
      data_type: INT4
      is_foreign_key: true
      reference: sales.dim_product.product_key

    - name: reseller_key
      description: 'Clave foránea que apunta a la tienda/distribuidor al que un vendedor le ha vendido el producto en la tabla `dim_reseller`. Tendrá un valor indicado únicamente para aquellos pedidos realizados por un vendedor para una tienda/distribuidor, indicadas en la columna `sales.fact_sales.sale_source` con el valor "reseller_sales", por el contrario, vendrá a NULL.'
      data_type: INT4
      is_foreign_key: true
      reference: sales.dim_reseller.reseller_key

    - name: employee_key
      description: 'Clave foránea que apunta al vendedor que ha vendido el producto a una tienda/distribuidor en la tabla `dim_sales_person`. Tendrá un valor indicado únicamente para aquellos pedidos realizados por un vendedor para una tienda/distribuidor, indicadas en la columna `sales.fact_sales.sale_source` con el valor "reseller_sales", por el contrario, vendrá a NULL.'
      data_type: INT4
      is_foreign_key: true
      reference: sales.dim_sales_person.employee_key

    - name: customer_key
      description: 'Clave foránea que apunta al cliente al que se le ha vendido el producto online en la tabla `dim_customer`. Tendrá un valor indicado únicamente para aquellos pedidos realizados en línea por un cliente, indicadas en la columna `sales.fact_sales.sale_source` con el valor "internet_sales", por el contrario, vendrá a NULL.'
      data_type: INT4
      is_foreign_key: true
      reference: sales.dim_customer.customer_key

    - name: promotion_key
      description: 'Clave foránea que apunta a la promoción aplicable al producto vendido en la tabla `dim_promotion`.'
      data_type: INT4
      is_foreign_key: true
      reference: sales.dim_promotion.promotion_key

    - name: sales_territory_key
      description: 'Clave foránea que apunta a la división territorial de ventas, a la que se le imputa la orden, en la tabla `dim_sales_territory`.'
      data_type: INT4
      is_foreign_key: true
      reference: sales.dim_sales_territory.sales_territory_key

    - name: sales_order_number
      description: 'Número de orden de venta. Junto con el número de línea, conforman identificador único de la transacción de venta.'
      data_type: VARCHAR(20)
      is_primary_key: true

    - name: sales_order_line_number
      description: 'Número de línea de la orden de venta. Junto con el número de orden de venta, conforman identificador único de la transacción de venta.'
      data_type: INT2
      is_primary_key: true

    - name: order_quantity
      description: 'Cantidad vendida de cada producto.'
      data_type: INT2

    - name: unit_price
      description: 'Precio de venta en USD de cada unidad de producto.'
      data_type: NUMERIC

    - name: extended_amount
      description: 'Precio de venta en USD de todas las unidades de producto. Se calcula como `order_quantity * unit_price`.'
      data_type: NUMERIC

    - name: unit_price_discount_pct
      description: 'Porcentaje de descuento aplicado sobre el precio unitario del producto. Está indicado en decimal, es decir, su rango va de 0 a 1.'
      data_type: FLOAT8

    - name: discount_amount
      description: 'Importe total de descuento en USD. Se calcula como `extended_amount * unit_price_discount_pct`.'
      data_type: FLOAT8

    - name: product_standard_cost
      description: 'Coste estándar en USD de cada unidad de producto.'
      data_type: NUMERIC

    - name: total_product_cost
      description: 'Coste estándar en USD de todas las unidades de producto. Se calcula como `order_quantity * product_standard_cost`.'
      data_type: NUMERIC

    - name: sales_amount
      description: 'Subtotal en USD de la línea de orden de venta. Se calcula como `extended_amount - discount_amount`.'
      data_type: NUMERIC

    - name: tax_amt
      description: 'Importe de impuestos en USD aplicable a la línea de orden de venta.'
      data_type: NUMERIC

    - name: freight
      description: 'Coste de envío en USD atribuíble a cada línea de orden de venta. Se reparte el total del coste de envío del pedido proporcionalmente al `sales_amount` de cada una de sus líneas.'
      data_type: NUMERIC

    - name: order_date
      description: 'Fecha en la que el pedido fué creado.'
      data_type: DATE

    - name: due_date
      description: 'Fecha en la que el pedido fué entregado al cliente. NUNCA vendrá a NULL, dado que se trata de todos pedidos que ya han sido entregados.'
      data_type: DATE

    - name: ship_date
      description: 'Fecha en la que se envió el pedido al cliente. NUNCA vendrá a NULL, dado que se trata de todos pedidos que ya han sido entregados.'
      data_type: DATE

    - name: sale_source
      description: 'Indicador de la fuente por la que ha sido realizado el pedido. reseller_sales=Pedido realizado por un vendedor para una tienda/distribuidor, internet_sales=Pedido realizado en línea por un cliente.'
      data_type: TEXT
